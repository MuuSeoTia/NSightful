<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NSightful GPU Visualizer</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r160/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chart.js/4.4.0/chart.min.js"></script>
</head>
<body>
    <div id="app">
        <!-- Simplified Header -->
        <header class="app-header">
            <div class="header-content">
                <div class="logo">NSightful</div>
                <div class="header-actions">
                    <button id="uploadBtn" class="btn primary">üìä Upload NSight Report</button>
                    <button id="recordBtn" class="btn secondary">‚è∫Ô∏è Record GPU Interval</button>
                    <a href="landing.html" class="btn" style="background: rgba(255,255,255,0.1); text-decoration: none;">üöÄ Landing</a>
                </div>
                <div class="recording-status" id="recordingStatus">
                    <div class="status-dot"></div>
                    <span class="status-text">Ready</span>
                </div>
            </div>
        </header>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- 3D GPU Visualization Section -->
            <section class="gpu-3d-section">
                <div class="section-header">
                    <h2>Interactive 3D GPU Visualization</h2>
                    <div class="component-controls">
                        <button class="component-btn active" data-component="all">All Components</button>
                        <button class="component-btn" data-component="sm">SM Units</button>
                        <button class="component-btn" data-component="memory">Memory</button>
                        <button class="component-btn" data-component="tensor">Tensor Cores</button>
                        <button class="component-btn" data-component="rt">RT Cores</button>
                    </div>
                </div>
                <div class="gpu-3d-container">
                    <canvas id="gpu3d"></canvas>
                    <div class="gpu-overlay-info">
                        <div class="info-item">
                            <span class="info-label">GPU Utilization</span>
                            <span class="info-value" id="gpu-util">0%</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Memory Usage</span>
                            <span class="info-value" id="mem-util">0%</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Temperature</span>
                            <span class="info-value" id="temp-info">0¬∞C</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Power Draw</span>
                            <span class="info-value" id="power-info">0W</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Performance Dashboard -->
            <section class="performance-section">
                <div class="section-header">
                    <h2>Performance Dashboard</h2>
                </div>
                <div class="charts-grid">
                    <div class="chart-panel">
                        <h3>GPU Utilization</h3>
                        <canvas id="gpuChart"></canvas>
                    </div>
                    <div class="chart-panel">
                        <h3>Memory Bandwidth</h3>
                        <canvas id="memoryChart"></canvas>
                    </div>
                    <div class="chart-panel">
                        <h3>Temperature & Power</h3>
                        <canvas id="thermalChart"></canvas>
                    </div>
                    <div class="chart-panel">
                        <h3>Component Activity</h3>
                        <canvas id="componentChart"></canvas>
                    </div>
                </div>
            </section>
        </main>

        <!-- Upload Modal -->
        <div class="modal" id="uploadModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Upload NSight Report</h3>
                    <button class="modal-close" id="closeUploadModal">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="upload-area" id="uploadArea">
                        <div class="upload-icon">üìä</div>
                        <p>Drag and drop your NSight report here</p>
                        <p class="upload-hint">Supports .nsight-cuprof, .ncu-rep, .qdrep files</p>
                        <button class="btn primary" id="browseFiles">Browse Files</button>
                        <input type="file" id="fileInput" accept=".nsight-cuprof,.ncu-rep,.qdrep" style="display: none;">
                    </div>
                    <div class="upload-progress" id="uploadProgress" style="display: none;">
                        <div class="progress-bar">
                            <div class="progress-fill" id="progressFill"></div>
                        </div>
                        <p id="progressText">Processing report...</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Record Modal -->
        <div class="modal" id="recordModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Record GPU Interval</h3>
                    <button class="modal-close" id="closeRecordModal">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="recordDuration">Duration (seconds)</label>
                        <input type="number" id="recordDuration" value="30" min="1" max="3600">
                    </div>
                    <div class="form-group">
                        <label for="sampleRate">Sample Rate (Hz)</label>
                        <input type="number" id="sampleRate" value="50" min="1" max="1000">
                    </div>
                    <div class="form-group">
                        <label>Metrics to Record</label>
                        <div class="checkbox-group">
                            <label><input type="checkbox" checked> GPU Utilization</label>
                            <label><input type="checkbox" checked> Memory Usage</label>
                            <label><input type="checkbox" checked> Temperature</label>
                            <label><input type="checkbox" checked> Power Consumption</label>
                            <label><input type="checkbox"> Clock Frequencies</label>
                            <label><input type="checkbox"> SM Activity</label>
                        </div>
                    </div>
                    <div class="modal-actions">
                        <button class="btn primary" id="startRecording">Start Recording</button>
                        <button class="btn secondary" id="closeRecordModal2">Cancel</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script type="module" src="main.js"></script>
</body>
</html>